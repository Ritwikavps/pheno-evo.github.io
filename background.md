## Some background
For a quick and visual summary, [please check out our poster from MEEVirtual 2020](https://ritwikavps.github.io/pheno-evo.github.io/images/MEEvirtual_poster_2020.png).

***Below is an introduction our group wrote for our report to the [Complex Systems Summer School 2019 Proceedings Book](https://santafe.edu/engage/learn/resources/2019-csss-proceedings).***

Scientists tend to appreciate microbes for their simplicity and predictability: we assume that populations of genetically identical cells in a uniform environment will all behave in the same way. The fact that this is generally true is the reason microbes are used so extensively in biological engineering, and for testing fundamental theories in ecology and evolution. However, in many cases this assumption is catastrophically wrong. There is a growing number of examples of clonal microbial populations that show diversity in a particular phenotype--for instance, growth rate, substrate preference, or antibiotic tolerance--in a way that is seemingly stochastic (i.e., not a case of plasticity in response to the environment). In some cases, this diversity may simply be noise with little consequence for the ecology of the population. In others, it seems to be an evolved trait, often in response to environmental stress, that confers increased fitness on the population as a whole even while some individuals behave in a way that is not optimal.

Prior work on phenotypic heterogeneity has shown that diversity among cells arises from stochastic processes (for instance, noise in gene expression, or in the partitioning of macromolecules upon cell division), and the interaction of those processes with cellular feedback mechanisms that ultimately lead cells to express discrete, environmentally relevant phenotypes (Deris et al. 2013, Kotte et al. 2014). While an individual's phenotype is not directly determined by its genotype, genes control both the feedback mechanisms and aspects of the stochastic components, so evolution can shape the ranges and distributions of the phenotypes. Heterogeneity can therefore be selected for. But is it selected for? If so, why? Under what circumstances might it be advantageous for a genotype to code for a distribution of possible phenotypes from which one will be chosen at random, rather than for a set of rules that will deterministically lead to a predictable phenotype? While a few laboratory-based experiments have made impressive advances in observing the evolution of phenotypic heterogeneity under specific growth conditions (Beaumont et al. 2009, Fridman et al. 2014), experimental work in this field remains difficult and labor-intensive. Much of what we know about the potential advantages of phenotypic heterogeneity comes from mathematical and computational modeling.

A common explanation for the evolutionary advantage of phenotypic heterogeneity is that it enables diversifying bet-hedging. One of the best-known examples of this strategy is the phenomenon of antibiotic persister cells: cells that have spontaneously entered a non-growing but antibiotic-tolerant state (Balaban et al. 2004). While maintaining persister cells in the population is a sacrifice in the short term because they are not able to replicate and therefore reduce the population's growth rate in good conditions, it is an advantage in the long term if the population has any probability of encountering antibiotics. Modeling efforts have demonstrated that diversifying bet-hedging is an advantage in environments that change rapidly and in an unpredictable way, and/or if the signals provided by the environment are unreliable (Lachmann et al. 1996, Kussell et al. 2005). That is, the best way to adapt to randomness in one's environment is to generate randomness in one's population. This can help to ensure that there will always be a few cells fit enough to survive in any environment that might arise. However, the less unpredictable the world is, the more likely it is that bet-hedging genotypes will be overtaken by genotypes that can anticipate the environmental changes, or that can accurately sense and respond to them (Arnoldini et al. 2012}.  

An alternative explanation for phenotypic diversity among microbes is division of labor: it may be advantageous for a population to generate cells that carry out different functions; and while bet-hedging may be seen as dividing responsibilities across different time periods, division of labor does so within the same environment. For example, in an environment with two growth substrates available, allowing individual cells to specialize in one or the other may reduce sibling competition and result in more efficient functioning at the population level (Nikolic et al. 2017). However, as with bet-hedging, division of labor may be expected to evolve only under certain circumstances (West et al. 2016). Models of cooperation in multi-species communities (which is, in many ways, a similar concept to division of labor) have shown that cooperation between genotypes can evolve when the behaviors of individuals exert localized effects on other members of the population, and is less likely when effects are evenly distributed (Hammarlund et al. 2016). For many microbial communities in the environment, spatial heterogeneity is the more realistic situation. We therefore wish to investigate the balance between bet-hedging and division of labor as potential drivers of phenotypic heterogeneity in a spatially explicit model of microbial population evolution.

We have approached this problem using an agent-based model (ABM), simulating a population of microbial cells in which the capacity for degrading an environmental toxin may be heterogeneously expressed. While most prior theoretical studies of phenotypic heterogeneity have used population-level approaches with differential equations, describing microbial populations and subpopulations as state variables, ABMs are especially useful for simulating the dynamics of many individuals that interact with each other in space (Hellweger et al. 2009). Moreover, this approach enables the observation of the effects of stochastic processes on small populations. We built our model in NetLogo, a platform that integrates the writing and visualization of ABMs in a way specifically designed to be accessible to students and to scientists new to modeling. For experiments requiring many model runs, such as the parameter sweeps described below, we ran the NetLogo model in headless mode. 

## References 
* Arnoldini, M., Mostowy, R., Bonhoeffer, S., and Ackermann, M. (2012). Evolution of stress response in the face of unreliable environmental signals. PLOS Computational Biology 8, e1002627.
* Balaban, N.Q., Merrin, J., Chait, R., Kowalik, L., and Leibler, S. (2004). Bacterial persistence as a phenotypic switch. Science 305, 1622–1625.
* Beaumont, H.J.E., Gallie, J., Kost, C., Ferguson, G.C., and Rainey, P.B. (2009). Experimental evolution of bet hedging. Nature 462, 90.
* Deris, J.B., Kim, M., Zhang, Z., Okano, H., Hermsen, R., Groisman, A., and Hwa, T. (2013). The innate growth bistability and fitness landscapes of antibiotic-resistant bacteria. Science 342, 1237435.
* Fridman, O., Goldberg, A., Ronin, I., Shoresh, N., and Balaban, N.Q. (2014). Optimization of lag time underlies antibiotic tolerance in evolved bacterial populations. Nature 513, 418–421.
* Hammarlund, S.P., Connelly, B.D., Dickinson, K.J., and Kerr, B. (2016). The evolution of cooperation by the Hankshaw effect. Evolution 70, 1376–1385.
* Kotte, O., Volkmer, B., Radzikowski, J.L., and Heinemann, M. (2014). Phenotypic bistability in Escherichia coli’s central carbon metabolism. Molecular Systems Biology 10, 736–736.
* Kussell, E., and Leibler, S. (2005). Phenotypic diversity, population growth, and information in fluctuating environments. Science 309, 2075–2078.
* Lachmann, M., and Jablonka, E. (1996). The Inheritance of Phenotypes: an Adaptation to Fluctuating Environments. Journal of Theoretical Biology 181, 1–9.
* Nikolic, N., Schreiber, F., Co, A.D., Kiviet, D.J., Bergmiller, T., Littmann, S., Kuypers, M.M.M., and Ackermann, M. (2017). Cell-to-cell variation and specialization in sugar metabolism in clonal bacterial populations. PLOS Genetics 13, e1007122.
* West, S.A., and Cooper, G.A. (2016). Division of labour in microorganisms: an evolutionary perspective. Nature Reviews Microbiology 14, 716.
